\chapter{Теоретические основы}
\label{chapter1}

\begin{annotation}
	В этой главе будут изложены теоретические основы обработки временных рядов, будет объяснено понятие микросервисной архитектуры, и обозначены задачи, в которых её использование в контексте обработки временных рядов уместно.
\end{annotation}

\section{Временные ряды}
\begin{annotation}
	В этом разделе будут изложены теоретические основы обработки временных рядов: понятие временного ряда, компоненты временного ряда, некоторые методы таких рядов. 
\end{annotation}

\subsection{Понятие временного ряда}
Временной ряд, также известный как ряд динамики или динамический ряд, представляет собой это последовательность упорядоченных во времени числовых показателей, характеризующих уровень состояния и изменения изучаемого явления \cite{афанасьев2010анализ}.
Временной ряд состоит из двух элементов \cite{афанасьев2010анализ}:

\begin{itemize}
	\item Последовательность значений времени: значения могут представлять конкретный момент времени (например, дата) или определенный период (например, сутки, месяцы, кварталы, полугодия, годы и так далее).
	\item Соответствующие времени значения уровней ряда: это числовые значения, которые характеризуют показатель на указанные моменты времени или в определенные интервалы времени.
\end{itemize}

Временные ряды могут быть моментными или интервальными \cite{афанасьев2010анализ} в зависимости от характера временного параметра. В моментных временных рядах уровни отражают значения показателя в конкретные моменты времени. Например, моментными рядами могут быть временные ряды цен на определенные виды товаров или ряды курсов акций, где уровни фиксируются для конкретных чисел. Примерами моментных временных рядов могут также служить ряды численности населения или стоимости основных фондов, так как значения уровней этих рядов определяются ежегодно в одно и то же число.

В интервальных временных рядах уровни отражают значения показателя за определенные интервалы времени. Примерами могут служить ряды годовой, месячной или квартальной динамики производства продукции в натуральном или стоимостном выражении. В таких рядах уровни характеризуют общую динамику показателя за указанные периоды времени, позволяя анализировать изменения и тренды на протяжении этих периодов.
Временные ряды являются важным инструментом для анализа и прогнозирования динамики показателей во времени. Путем изучения подобных рядов можно выявить закономерности, сезонность, цикличность и другие факторы, влияющие на изменение показателей с течением времени. Это позволяет принимать обоснованные решения и составлять стратегии на основе этих данных.

\subsection{Компоненты временного ряда}
В исследованиях динамики экономических показателей \cite{lecture1}, а также в процессе прогнозирования, обычно принимается во внимание, что значения уровней временных рядов могут содержать несколько компонентов. Эти компоненты включают:

\begin{enumerate}
	\item тренд, 
	\item сезонную составляющую, 
	\item циклическую составляющую,
	\item случайную составляющую.
\end{enumerate}

Тренд представляет собой общую тенденцию развития временного ряда и определяет его направление \cite{lecture1}. Он является долговременной систематической составляющей. Временные ряды экономических процессов также могут содержать периодические колебания, которые вызываются различными факторами. Если период этих колебаний составляет не более одного года, то они называются сезонными. Примером может служить колебание цен на картофель из-за изменений сезона уборки урожая и хранения продукции.

% Если период колебаний превышает год, то говорят о наличии циклической составляющей во временном ряду. Примерами циклических факторов могут быть демографические и инвестиционные циклы.
% Когда мы удаляем тренд и периодические составляющие из временного ряда, остается нерегулярная компонента. 

% Экономисты делают различие между двумя типами факторов, которые влияют на нерегулярную компоненту.
% Первый тип - это факторы резкого и внезапного воздействия, такие как стихийные бедствия и эпидемии. Эти факторы обычно вызывают значительные отклонения от ожидаемого уровня. Их воздействие на ряд иногда называется катастрофическими колебаниями.
% Второй тип - это текущие факторы, которые вызывают случайные колебания и являются результатом влияния множества побочных причин. Влияние каждого отдельного фактора незначительно, но суммарное воздействие ощутимо.
% Таким образом, при анализе и прогнозировании временных рядов экономических показателей необходимо учитывать все эти компоненты, чтобы получить более точные результаты и более надежные прогнозы.
% Если временной ряд представляется в виде суммы соответствующих компонент, то полученная модель носит название аддитивной (1.1), если в виде произведения – мультипликативной (1.2) или смешанного типа (1.3):

% \begin{itemize}
% 	\item yt – уровни временного ряда; 
% 	\item ut – трендовая составляющая; 
% 	\item st – сезонная компонента; 
% 	\item vt – циклическая компонента;
% 	\item εt – случайная компонента.
% \end{itemize}

% Решение любой задачи по анализу и прогнозированию временных рядов начинается с построения графика исследуемого показателя. Иногда на стадии графического анализа можно определить характер сезонных колебаний: аддитивный или мультипликативный. Отличительной особенностью аддитивной модели является то, что амплитуда сезонных колебаний, отражающая отклонения от тренда или среднего, остается примерно постоянной, неизменной во времени.
% В качестве примера рассмотрим временной ряд производства электроэнергии в России с 1994 по 1999 гг. (рис.1). 
% На основании этого графика можно предположить, что тенденция ряда в исследуемом периоде была близка к линейному развитию, а амплитуда внутригодовых колебаний примерно постоянна. На рис. 1 видны устойчивые сезонные колебания, имеющие годовую периодичность: очевидны повторяющиеся подъемы производства в зимне-осенний период, спады – в весенне-летний период. Амплитуду периодических колебаний можно считать практически неизменной, не зависящей от уровня тренда, что приводит к выводу об аддитивном характере сезонности.


\section{Микросервисная архитектура}
\begin{annotation}
	В этой главе будет описана микросервисная архитектура, плюсы и минусы её использования в контексте обработки временных рядов.
\end{annotation}

Микросервисы – это архитектурный и организационный подход к разработке программного обеспечения, при котором программное обеспечение состоит из небольших независимых сервисов, взаимодействующих через четко
определенные API. Часто такой подход противопоставляется монолитному подходу [TODO: ссылка на сравнение]

\begin{enumerate}
	\item Система поделена на модули-сервисы.
	\item Сервисы могут разрабатываться независимо, за счёт малой связности сервисов между собой
	\item Каждый сервис предоставляют интерфейс для удаленного использования.
	\item Изолированное состояние сервиса, распределенность.
	\item Возможно использование различных парадигм вычисления и хранения.
	% \item Deployed with Lightweight containers
	% \item Practicing continuous delivery and decentralization during service deployment
	% \item Employing light and automated approaches for holistic management (DevOps)
\end{enumerate}


Если обрабатывать ряд целиком, то растут накладные расходы на хранение данных внутри каждого сервиса, а сами сервисы простаивают в ожидании данных. 
Однако при потоковой обработке не требуется хранение всего ряда в каждом сервисе. Вместо этого обработка происходит частями, что позволяет использовать все преимущества микросервисной архитектуры.

\section{Прогнозирование потоковых данных}
\begin{annotation}
	В этом разделе рассказано о задаче прогнозирования временного ряда и том как её можно решить с использованием потоковой обработки данных.
\end{annotation}

% Можно предсказывать временные ряды с помощью нейро сетей. И в таком случае можно обучать сеть на уже реальных данных.   


% 1.3. Моделирование временных рядов
% Работа с временными рядами предполагает два аспекта:
% 1.	Анализ временного ряда, т.е. понимание его структуры и закономерностей;
% 2.	Моделирование и построение прогноза на будущее 
% Моделирование временных рядов является важным инструментом для прогнозирования будущих значений ряда, что позволяет принимать более обоснованные решения в различных областях.
% Одной из наиболее применяемых моделей для прогнозирования временных рядов является AR-модель. В этой модели используются предыдущие значения ряда для прогнозирования его будущих значений. AR-модель предполагает, что текущее значение ряда зависит от его предыдущих значений. Например, в анализе финансовых рынков можно использовать AR-модель для прогнозирования будущих цен акций на основе их прошлых значений.
% Другой распространенной моделью является MA-модель, которая использует прошлые значения ошибок для прогнозирования будущих значений ряда. Например, при прогнозировании количества пользователей веб-сайта можно использовать MA-модель, чтобы улучшить точность прогноза, учитывая предыдущие ошибки прогноза.
% ARIMA [1] -модель является комбинацией AR- и MA-моделей и позволяет моделировать временные ряды, которые не являются стационарными. Она включает параметр авторегрессии (р), параметр скользящего среднего (q) и параметр интегрирования (d) который отвечает за удаление тренда (сам процесс называется дифференцированием). Например, для прогнозирования месячной выручки продукта можно использовать ARIMA модель, учитывая тренд, сезонность и циклы в данных.
% SARIMA [1] - модель является расширением ARIMA с добавлением сезонности. Она также включает параметры, связанные с сезонностью: период сезонности (P), параметр авторегрессии с сезонностью (S) и параметр скользящего среднего с сезонностью (Q), что позволяет более точно моделировать сезонное поведение временных рядов. Например, при анализе сезонных колебаний выручки продукта можно использовать SARIMA-модель (Рис.2).

